<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>José María Pérez Quintana - Biblioteca Digital</title>
  <style>
    :root {
      --bg: #0f172a; 
      --panel: #111827; 
      --card: #1f2937; 
      --muted: #94a3b8;
      --text: #e5e7eb; 
      --accent: #22d3ee; 
      --danger: #f87171;
      --success: #4ade80;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background: linear-gradient(180deg, #0b1020, #0f172a);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      background: radial-gradient(1000px 400px at 10% -10%, rgba(34,211,238,0.15), transparent),
                  var(--panel);
      border-bottom: 1px solid #1f2937;
      padding: 40px 16px;
    }

    .wrap { max-width: 800px; margin: 0 auto; width: 100%; }
    
    .hero { 
      display: flex; 
      flex-direction: column; 
      align-items: center; 
      text-align: center; 
      gap: 20px; 
    }

    .hero img {
      height: 140px; 
      width: 140px; 
      border-radius: 50%;
      object-fit: cover; 
      border: 3px solid var(--accent);
      box-shadow: 0 0 30px rgba(34,211,238,0.3);
      transition: transform 0.3s ease;
    }

    .hero img:hover { transform: scale(1.05); }

    h1 { 
      margin: 0; 
      font-size: 28px; 
      color: #fff; 
      letter-spacing: 1px;
      text-transform: uppercase;
    }

    .resena { 
      color: var(--muted); 
      line-height: 1.6; 
      font-size: 16px; 
      max-width: 650px; 
      font-style: italic;
    }

    main { padding: 40px 16px; flex: 1; }
    
    .search-panel {
      background: var(--card);
      border: 1px solid #334155;
      border-radius: 24px;
      padding: 30px;
      box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5);
    }

    /* Caja de selección dinámica */
    .selection-box {
      background: rgba(11, 16, 32, 0.8);
      border: 1px solid var(--accent);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 25px;
      display: none;
      animation: fadeIn 0.4s ease-out;
    }

    @keyframes fadeIn { 
      from { opacity: 0; transform: translateY(-10px); } 
      to { opacity: 1; transform: translateY(0); } 
    }

    .selection-box h3 { margin: 0 0 8px 0; color: var(--accent); font-size: 20px; }
    .selection-box .url-text { 
      font-size: 13px; 
      color: var(--muted); 
      word-break: break-all; 
      margin-bottom: 20px;
      display: block;
    }
    
    .actions { display: flex; gap: 12px; flex-wrap: wrap; }
    
    .btn {
      padding: 12px 24px; 
      border-radius: 12px; 
      border: 1px solid #334155;
      background: #111827; 
      color: var(--text); 
      cursor: pointer; 
      transition: all 0.2s;
      font-size: 14px; 
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn:hover { border-color: var(--accent); background: #1f2937; transform: translateY(-2px); }
    .btn.primary { background: var(--accent); color: #0f172a; border: none; }
    .btn.primary:hover { background: #67e8f9; box-shadow: 0 4px 15px rgba(34,211,238,0.3); }
    .btn.danger { color: var(--danger); border-color: rgba(248,113,113,0.2); }
    .btn.danger:hover { background: rgba(248,113,113,0.1); border-color: var(--danger); }

    /* Buscador */
    .search-input-group {
      display: flex; 
      gap: 12px; 
      margin-bottom: 25px;
    }

    .search-input-group input {
      flex: 1; 
      padding: 16px 20px; 
      border-radius: 16px; 
      border: 1px solid #334155;
      background: #0b1020; 
      color: #fff; 
      outline: none; 
      font-size: 16px;
      transition: border-color 0.3s;
    }

    .search-input-group input:focus { 
      border-color: var(--accent); 
      box-shadow: 0 0 0 3px rgba(34,211,238,0.1); 
    }

    /* Lista de Artículos */
    .list {
      max-height: 500px; 
      overflow-y: auto;
      border-top: 1px solid #1e293b; 
      padding-top: 20px;
    }

    .item {
      padding: 16px; 
      border-radius: 12px; 
      margin-bottom: 10px;
      background: rgba(255,255,255,0.03); 
      cursor: pointer; 
      transition: all 0.2s ease;
      border: 1px solid transparent;
    }

    .item:hover { 
      background: rgba(34,211,238,0.08); 
      transform: translateX(8px);
    }

    .item.active { 
      background: rgba(34,211,238,0.15); 
      border-color: var(--accent); 
    }

    .item .titulo { font-size: 16px; font-weight: 500; }

    footer {
      text-align: center;
      padding: 30px;
      font-size: 14px;
      color: var(--muted);
      border-top: 1px solid #1e293b;
    }

    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--accent); }

    @media (max-width: 600px) {
      .search-input-group { flex-direction: column; }
      .hero img { height: 100px; width: 100px; }
    }
  </style>
</head>
<body>

<header>
  <div class="wrap hero">
    <img src="LOGO.png" alt="José María Pérez Quintana">
    <div>
      <h1>José María Pérez Quintana</h1>
      <div class="resena">“Divulgo ciencia, historia política, filosofía y curiosidades. El propósito es aportar conocimiento.”</div>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="search-panel">
    
    <div id="selectionBox" class="selection-box">
      <h3 id="selTitle">Título del Artículo</h3>
      <span id="selUrl" class="url-text">url-del-articulo</span>
      <div class="actions">
        <button id="btnOpen" class="btn primary">Leer Ahora</button>
        <button id="btnCopy" class="btn">Copiar Enlace</button>
        <button id="btnPDF" class="btn">Versión para Imprimir</button>
      </div>
    </div>

    <div class="search-input-group">
      <input id="q" type="text" placeholder="Buscar temas, artículos o curiosidades..." autocomplete="off">
      <button id="btnClear" class="btn danger">Limpiar Filtros</button>
    </div>

    <div id="lista" class="list">
      <div style="text-align:center; padding: 20px; color: var(--muted);">Cargando biblioteca...</div>
    </div>
  </div>
</main>

<footer>
  &copy; 2026 José María Pérez Quintana. Divulgación de Conocimiento.
</footer>

<script>
  let articulos = [];
  let seleccionado = null;

  const lista = document.getElementById('lista');
  const q = document.getElementById('q');
  const selectionBox = document.getElementById('selectionBox');
  const selTitle = document.getElementById('selTitle');
  const selUrl = document.getElementById('selUrl');

  // Carga los datos desde el archivo JSON
  async function cargarArticulos() {
    try {
      const respuesta = await fetch('ARTICULOS.json');
      if (!respuesta.ok) throw new Error("No se pudo encontrar ARTICULOS.json");
      const datos = await respuesta.json();
      
      articulos = datos.map(a => ({
        titulo: a.nombre || a.titulo || "Sin título",
        url: a.url || a.loc || "#"
      })).sort((a, b) => a.titulo.localeCompare(b.titulo));

      render(articulos);
    } catch (e) {
      lista.innerHTML = `
        <div style="text-align:center; padding: 20px; color: var(--danger);">
          No se pudo cargar la lista de artículos. Verifica que el archivo ARTICULOS.json esté presente.
        </div>`;
    }
  }

  function render(items) {
    lista.innerHTML = '';
    if (items.length === 0) {
      lista.innerHTML = '<div style="text-align:center; padding: 20px; color: var(--muted);">No se encontraron resultados.</div>';
      return;
    }

    items.forEach(it => {
      const div = document.createElement('div');
      div.className = 'item' + (seleccionado === it ? ' active' : '');
      div.innerHTML = `<div class="titulo">${it.titulo}</div>`;
      
      div.onclick = () => {
        seleccionado = it;
        mostrarDetalle(it);
        render(items); 
      };
      lista.appendChild(div);
    });
  }

  function mostrarDetalle(it) {
    selectionBox.style.display = "block";
    selTitle.textContent = it.titulo;
    selUrl.textContent = it.url;
    // Scroll suave hasta la selección en móviles
    if(window.innerWidth < 600) {
        selectionBox.scrollIntoView({ behavior: 'smooth' });
    }
  }

  q.oninput = () => {
    const busqueda = q.value.toLowerCase();
    const filtrados = articulos.filter(a => a.titulo.toLowerCase().includes(busqueda));
    render(filtrados);
  };

  document.getElementById('btnClear').onclick = () => {
    q.value = '';
    selectionBox.style.display = "none";
    seleccionado = null;
    render(articulos);
  };

  document.getElementById('btnOpen').onclick = () => { 
    if(seleccionado) window.open(seleccionado.url, '_blank'); 
  };
  
  document.getElementById('btnCopy').onclick = async () => {
    if(!seleccionado) return;
    try {
        await navigator.clipboard.writeText(seleccionado.url);
        const btn = document.getElementById('btnCopy');
        const originalText = btn.innerHTML;
        btn.textContent = '¡Copiado!';
        btn.style.color = 'var(--success)';
        setTimeout(() => {
            btn.innerHTML = originalText;
            btn.style.color = 'var(--text)';
        }, 2000);
    } catch (err) {
        console.error('Error al copiar', err);
    }
  };

  document.getElementById('btnPDF').onclick = () => window.print();

  // Iniciar carga
  cargarArticulos();
</script>

</body>
</html>